<?php

namespace MediaWiki\Extension\EventSimulator\Model\LoadBalancer;

/**
 * A scenario modelling s1 production traffic
 */
class PlainS1Scenario extends Scenario {
	# Server - avg conns - conn rate
	private const PROD_CONN_DATA = '
db1099	19.398809523809526	216.46029099823835
db1105	19.86422200198216	216.35542766967802
db1106	21.249752229930625	216.50274422581532
db1118	75.29236868186324	85.81005330730034
db1119	74.86254980079681	868.5980191216462
db1128	79.42319127849356	888.1981526523048
db1132	47.00199203187251	0.26477301951613796
db1134	79.09217046580773	890.1997582233031
db1135	79.22695738354807	886.8432208729985
db1154	7	1.8240325850673142
db1163	105.25569871159564	833.9915391218666
db1169	79.27552031714569	888.5993757505973
db1184	78.33201189296334	887.043972185972
db1186	64.84362549800797	694.1930719661159
db2103	19.409316154608522	16.72331406333398
db2112	4.182539682539683	11.862275446768011
db2116	4.35183349851338	16.433700879903693
db2130	4.473214285714286	16.429483152355804
db2145	4.405753968253968	16.42405650044396
db2146	4.671626984126984	18.81895413481584
db2153	4.451388888888889	16.426536502651786
db2167	4.1952428146679885	12.65270008107482
db2170	4.130822596630327	11.422050137785956
db2173	5.093253968253968	11.421867483830114
db2174	4.605550049554014	18.823396678293726
db2176	4.680872150644202	18.82029476488302
';

	private const PROD_LOADS = [
		'db1118' => 0,
		'db1099' => 50,
		'db1105' => 50,
		'db1106' => 50,
		'db1119' => 200,
		'db1128' => 200,
		'db1134' => 200,
		'db1135' => 200,
		'db1163' => 325,
		'db1169' => 200,
		'db1184' => 200,
		'db1186' => 200,
	];

	protected function getConnData() {
		return self::PROD_CONN_DATA;
	}

	public function getLoads() {
		return self::PROD_LOADS;
	}

	protected function getClientCount() {
		return 139;
	}
}
